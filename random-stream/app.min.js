!function(){"use strict";
/* Riot v4.8.0, @license MIT */const t=new Map,e=Symbol("riot-component"),n=new Set,r="is",i="mount",s="update",o="unmount",a=Symbol.for("pure"),u=Symbol("parent"),c=Symbol("attributes"),l=Symbol("template");function p(t){return typeof t==="function"}function h(){return this}function d(t){return p(t)?t.prototype&&t.prototype.constructor?new t:t():t}function m(t){Array.from(t).forEach(t=>t.parentNode&&t.parentNode.removeChild(t))}const f=2;var g={EACH:0,IF:1,SIMPLE:f,TAG:3,SLOT:4};const b=0,v=2,y=3;var x={ATTRIBUTE:b,EVENT:1,TEXT:v,VALUE:y};const{indexOf:O}=[],T=(t,e,n,r,i,s)=>{const o="selectedIndex"in e;let a=o;for(;r<i;){const i=t(n[r],1);if(e.insertBefore(i,s),o&&a&&i.selected){a=!a;let{selectedIndex:t}=e;e.selectedIndex=t<0?r:O.call(e.querySelectorAll("option"),i)}r++}},w=(t,e)=>t==e,k=t=>t,E=(t,e,n,r,i,s,o)=>{const a=s-i;if(a<1)return-1;for(;n-e>=a;){let a=e,u=i;for(;a<n&&u<s&&o(t[a],r[u]);)a++,u++;if(u===s)return e;e=a+1}return-1},N=(t,e,n,r,i)=>n<r?t(e[n],0):0<n?t(e[n-1],-0).nextSibling:i,j=(t,e,n,r)=>{for(;n<r;)C(t(e[n++],-1))},A=(t,e,n)=>{let r=1,i=e;for(;r<i;){const e=(r+i)/2>>>0;n<t[e]?i=e:r=e+1}return r},M=(t,e,n,r,i,s,o,a,u,c,l,p,h)=>{((t,e,n,r,i,s,o,a,u)=>{const c=[],l=t.length;let p=o,h=0;for(;h<l;)switch(t[h++]){case 0:i++,p++;break;case 1:c.push(r[i]),T(e,n,r,i++,i,p<a?e(s[p],0):u);break;case-1:p++}for(h=0;h<l;)switch(t[h++]){case 0:o++;break;case-1:-1<c.indexOf(s[o])?o++:j(e,s,o++,o)}})(((t,e,n,r,i,s,o)=>{const a=n+s,u=[];let c,l,p,h,d,m,f;t:for(c=0;c<=a;c++){if(c>50)return null;for(f=c-1,d=c?u[c-1]:[0,0],m=u[c]=[],l=-c;l<=c;l+=2){for(h=l===-c||l!==c&&d[f+l-1]<d[f+l+1]?d[f+l+1]:d[f+l-1]+1,p=h-l;h<s&&p<n&&o(r[i+h],t[e+p]);)h++,p++;if(h===s&&p===n)break t;m[c+l]=h}}const g=Array(c/2+a/2);let b=g.length-1;for(c=u.length-1;c>=0;c--){for(;h>0&&p>0&&o(r[i+h-1],t[e+p-1]);)g[b--]=0,h--,p--;if(!c)break;f=c-1,d=c?u[c-1]:[0,0],l=h-p,l===-c||l!==c&&d[f+l-1]<d[f+l+1]?(p--,g[b--]=1):(h--,g[b--]=-1)}return g})(n,r,s,o,a,c,p)||((t,e,n,r,i,s,o,a)=>{let u=0,c=r<a?r:a;const l=Array(c++),p=Array(c);p[0]=-1;for(let t=1;t<c;t++)p[t]=o;const h=i.slice(s,o);for(let r=e;r<n;r++){const e=h.indexOf(t[r]);if(-1<e){const t=e+s;u=A(p,c,t),-1<u&&(p[u]=t,l[u]={newi:r,oldi:t,prev:l[u-1]})}}for(u=--c,--o;p[u]>o;)--u;c=a+r-u;const d=Array(c);let m=l[u];for(--n;m;){const{newi:t,oldi:e}=m;for(;n>t;)d[--c]=1,--n;for(;o>e;)d[--c]=-1,--o;d[--c]=0,--n,--o,m=m.prev}for(;n>=e;)d[--c]=1,--n;for(;o>=s;)d[--c]=-1,--o;return d})(n,r,i,s,o,a,u,c),t,e,n,r,o,a,l,h)},C=t=>(t.remove||S).call(t);function S(){const{parentNode:t}=this;t&&t.removeChild(this)}
/*! (c) 2018 Andrea Giammarchi (ISC) */function B(t,e){return typeof t===e}function I(t){const e=t.ownerSVGElement;return!!e||null===e}function U(t){return!L(t.content)}function z(t){return!L(t)&&B(t,"object")}function L(t){return null==t}const D=Symbol("unmount"),R=Object.seal({nodes:[],mount(t,e){return this.update(t,e)},update(t,e){const{placeholder:n,nodes:r,childrenMap:i}=this,s=t===D?null:this.evaluate(t),o=s?Array.from(s):[],a=n.parentNode,{newChildrenMap:u,batches:c,futureNodes:l}=function(t,e,n,r){const{condition:i,template:s,childrenMap:o,itemName:a,getKey:u,indexName:c,root:l,isTemplateTag:p}=r,h=new Map,d=[],m=[];return t.forEach((t,r)=>{const f=function(t,e){let{itemName:n,indexName:r,index:i,item:s}=e;t[n]=s,r&&(t[r]=i);return t}(Object.create(e),{itemName:a,indexName:c,index:r,item:t}),g=u?u(f):r,b=o.get(g);if(function(t,e){return!!t&&!1===Boolean(t(e))}(i,f))return;const v=b?b.template:s.clone(),y=b?v.el:l.cloneNode(),x=!b,O=p&&x?function(t){const e=t.dom.cloneNode(!0);return{avoidDOMInjection:!0,fragment:e,children:Array.from(e.childNodes)}}(v):{};if(x?d.push(()=>v.mount(y,f,n,O)):d.push(()=>v.update(f,n)),p){const t=O.children||v.children;m.push(...t),t.forEach(t=>h.set(t,null))}else m.push(y);o.delete(g),h.set(g,{template:v,context:f,index:r})}),{newChildrenMap:h,batches:d,futureNodes:m}}(o,t,e,this);return((t,e,n,r)=>{r||(r={});const i=r.compare||w,s=r.node||k,o=null==r.before?null:s(r.before,0),a=e.length;let u=a,c=0,l=n.length,p=0;for(;c<u&&p<l&&i(e[c],n[p]);)c++,p++;for(;c<u&&p<l&&i(e[u-1],n[l-1]);)u--,l--;const h=c===u,d=p===l;if(h&&d)return n;if(h&&p<l)return T(s,t,n,p,l,N(s,e,c,a,o)),n;if(d&&c<u)return j(s,e,c,u),n;const m=u-c,f=l-p;let g=-1;if(m<f){if(g=E(n,p,l,e,c,u,i),-1<g)return T(s,t,n,p,g,s(e[c],0)),T(s,t,n,g+m,l,N(s,e,u,a,o)),n}else if(f<m&&(g=E(e,c,u,n,p,l,i),-1<g))return j(s,e,c,g),j(s,e,g+f,u),n;m<2||f<2?(T(s,t,n,p,l,s(e[c],0)),j(s,e,c,u)):m===f&&((t,e,n,r,i,s)=>{for(;r<i&&s(n[r],t[e-1]);)r++,e--;return 0===e})(n,l,e,c,u,i)?T(s,t,n,p,l,N(s,e,u,a,o)):M(s,t,n,p,l,f,e,c,u,m,a,i,o)})(a,r,l,{before:n,node:$(Array.from(i.values()),e)}),c.forEach(t=>t()),this.childrenMap=u,this.nodes=l,this},unmount(t,e){return this.update(D,e),this}});function $(t,e){return(n,r)=>{if(r<0){const n=t.pop();if(n){const{template:t,context:r}=n;t.unmount(r,e,null)}}return n}}const _=Object.seal({mount(t,e){return this.parent.insertBefore(this.placeholder,this.node),this.parent.removeChild(this.node),this.update(t,e)},update(t,e){const n=!!this.evaluate(t),r=!this.value&&n,i=this.value&&!n,s=()=>{const n=this.node.cloneNode();this.parent.insertBefore(n,this.placeholder),this.template=this.template.clone(),this.template.mount(n,t,e)};switch(!0){case r:s();break;case i:this.unmount(t);break;default:n&&this.template.update(t,e)}return this.value=n,this},unmount(t,e){return this.template.unmount(t,e,!0),this}});const P="removeAttribute",H="setAttribute";function V(t,e,n,r){let{name:i}=e;i?((function(t){return B(t,"boolean")}(n)||z(n))&&(t[i]=n),t[function(t){return L(t)||!1===t||""===t||z(t)?P:H}(n)](i,function(t,e){return!0===e?t:e}(i,n))):n?function(t,e){Object.entries(e).forEach(e=>{let[n,r]=e;return V(t,{name:n},r)})}(t,n):r&&function(t,e){Object.keys(e).forEach(e=>t.removeAttribute(e))}(t,r)}const K=/^on/;function X(t){return L(t)?"":t}const q=(t,e)=>{const n=t.childNodes[e];if(n.nodeType===Node.COMMENT_NODE){const e=document.createTextNode("");return t.replaceChild(e,n),e}return n};var G={[b]:V,1:function(t,e,n,r){let{name:i}=e;const s=i.replace(K,"");r&&t.removeEventListener(s,r),n&&t.addEventListener(s,n,!1)},[v]:function(t,e,n){t.data=X(n)},[y]:function(t,e,n){t.value=X(n)}};const F=Object.seal({mount(t){return this.value=this.evaluate(t),J(this,this.value),this},update(t){const e=this.evaluate(t);return this.value!==e&&(J(this,e),this.value=e),this},unmount(){return 1===this.type&&J(this,null),this}});function J(t,e){return G[t.type](t.node,t,e,t.value)}function Y(t,e){return Object.assign({},F,{},e,{node:e.type===v?q(t,e.childNodeIndex):t})}function Z(t,e,n){if(!t||!t.length)return n;const r=t.map(t=>Object.assign({},t,{value:t.evaluate(e)}));return Object.assign(Object.create(n||null),function(t){return t.reduce((t,e)=>{const{value:n,type:r}=e;switch(!0){case!e.name&&r===b:return Object.assign({},t,{},n);case r===y:t.value=e.value;break;default:t[function(t){return t.replace(/-(\w)/g,(t,e)=>e.toUpperCase())}(e.name)]=e.value}return t},{})}(r))}const Q=Object.seal({attributes:[],getTemplateScope(t,e){return Z(this.attributes,t,e)},mount(t,e){const n=!!t.slots&&t.slots.find(t=>{let{id:e}=t;return e===this.name}),{parentNode:r}=this.node;return this.template=n&&ot(n.html,n.bindings).createDOM(r),this.template&&(this.template.mount(this.node,this.getTemplateScope(t,e)),this.template.children=function t(e,n){void 0===n&&(n=[]);const r=e.firstChild;if(r)return e.parentNode.insertBefore(r,e),[r,...t(e)];return n}(this.node)),r.removeChild(this.node),this},update(t,e){return this.template&&this.template.update(this.getTemplateScope(t,e)),this},unmount(t,e,n){return this.template&&this.template.unmount(this.getTemplateScope(t,e),null,n),this}});function W(t){return t.reduce((t,e)=>{let{bindings:n}=e;return t.concat(n)},[])}const tt=Object.seal({mount(t){return this.update(t)},update(t,e){const n=this.evaluate(t);return n===this.name?this.tag.update(t):(this.unmount(t,e,!0),this.name=n,this.tag=function(t,e,n){return void 0===e&&(e=[]),void 0===n&&(n=[]),t?t({slots:e,attributes:n}):ot(function(t){return t.reduce((t,e)=>t+e.html,"")}(e),[...W(e),{expressions:n.map(t=>Object.assign({type:b},t))}])}(this.getComponent(n),this.slots,this.attributes),this.tag.mount(this.node,t)),this},unmount(t,e,n){return this.tag&&this.tag.unmount(n),this}});var et={1:function(t,e){let{evaluate:n,template:r}=e;return Object.assign({},_,{node:t,evaluate:n,parent:t.parentNode,placeholder:document.createTextNode(""),template:r.createDOM(t)})},[f]:function(t,e){let{expressions:n}=e;return Object.assign({},(r=n.map(e=>Y(t,e)),["mount","update","unmount"].reduce((t,e)=>Object.assign({},t,{[e]:t=>r.map(n=>n[e](t))&&i}),{})));var r,i},0:function(t,e){let{evaluate:n,condition:r,itemName:i,indexName:s,getKey:o,template:a}=e;const u=document.createTextNode(""),c=t.parentNode,l=t.cloneNode();return c.insertBefore(u,t),c.removeChild(t),Object.assign({},R,{childrenMap:new Map,node:t,root:l,condition:r,evaluate:n,isTemplateTag:U(l),template:a.createDOM(t),getKey:o,indexName:s,itemName:i,placeholder:u})},3:function(t,e){let{evaluate:n,getComponent:r,slots:i,attributes:s}=e;return Object.assign({},tt,{node:t,evaluate:n,slots:i,attributes:s,getComponent:r})},4:function(t,e){let{name:n,attributes:r}=e;return Object.assign({},Q,{attributes:r,node:t,name:n})}};function nt(t,e){return t.map(t=>t.type===v?Object.assign({},t,{childNodeIndex:t.childNodeIndex+e}):t)}function rt(t,e){return I(t)?function(t,e){return e.ownerDocument.importNode((new window.DOMParser).parseFromString(`<svg xmlns="http://www.w3.org/2000/svg">${t}</svg>`,"application/xml").documentElement,!0)}(e,t):function(t,e){const n=U(e)?e:document.createElement("template");return n.innerHTML=t,n.content}(e,t)}function it(t,e){switch(!0){case I(t):!function t(e,n){e.firstChild&&(n.appendChild(e.firstChild),t(e,n))}(e,t);break;case U(t):t.parentNode.replaceChild(e,t);break;default:t.appendChild(e)}}const st=Object.freeze({createDOM(t){return this.dom=this.dom||function(t,e){return e&&("string"==typeof e?rt(t,e):e)}(t,this.html),this},mount(t,e,n,r){if(void 0===r&&(r={}),!t)throw new Error("Please provide DOM node to mount properly your template");this.el&&this.unmount(e);const{fragment:i,children:s,avoidDOMInjection:o}=r,{parentNode:a}=s?s[0]:t,u=U(t),c=u?Math.max(Array.from(a.children).indexOf(t),0):null;return this.isTemplateTag=u,this.createDOM(t),this.dom&&(this.fragment=i||this.dom.cloneNode(!0)),this.el=this.isTemplateTag?a:t,this.children=this.isTemplateTag?s||Array.from(this.fragment.childNodes):null,!o&&this.fragment&&it(t,this.fragment),this.bindings=this.bindingsData.map(t=>(function(t,e,n){const{selector:r,type:i,redundantAttribute:s,expressions:o}=e,a=r?t.querySelector(r):t;s&&a.removeAttribute(s);const u=o||[];return(et[i]||et[f])(a,Object.assign({},e,{expressions:n&&!r?nt(u,n):u}))})(this.el,t,c)),this.bindings.forEach(t=>t.mount(e,n)),this},update(t,e){return this.bindings.forEach(n=>n.update(t,e)),this},unmount(t,e,n){if(this.el){switch(this.bindings.forEach(r=>r.unmount(t,e,n)),!0){case this.children&&null!==n:m(this.children);break;case!0===n&&null!==this.el.parentNode:this.el.parentNode.removeChild(this.el);break;case null!==n:m(this.el.childNodes)}this.el=null}return this},clone(){return Object.assign({},this,{el:null})}});function ot(t,e){return void 0===e&&(e=[]),Object.assign({},st,{html:t,bindingsData:e})}function at(t,e,n,r){return void 0===r&&(r={}),Object.defineProperty(t,e,Object.assign({value:n,enumerable:!1,writable:!1,configurable:!0},r)),t}function ut(t,e,n){return Object.entries(e).forEach(e=>{let[r,i]=e;at(t,r,i,n)}),t}function ct(t,e){return Object.entries(e).forEach(e=>{let[n,r]=e;t[n]||(t[n]=r)}),t}const lt=0,pt=3;function ht(t){return t.replace(/-(\w)/g,(t,e)=>e.toUpperCase())}function dt(t){throw new Error(t)}function mt(t){return Array.isArray(t)?t:/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(t))&&"number"==typeof t.length?Array.from(t):[t]}function ft(t,e){return mt("string"==typeof t?(e||document).querySelectorAll(t):t)}const gt=t=>1===t.length?t[0]:t;function bt(t,e,n){const r="object"==typeof e?e:{[e]:n},i=Object.keys(r);return mt(t).forEach(t=>{i.forEach(e=>t.setAttribute(e,r[e]))}),t}function vt(t,e){return function(t,e,n){const r="string"==typeof e?[e]:e;return gt(mt(t).map(t=>gt(r.map(e=>t[n](e)))))}(t,e,"getAttribute")}const yt=new Map,xt=()=>Ot||(bt(Ot=ft("style[riot]")[0]||document.createElement("style"),"type","text/css"),Ot.parentNode||document.head.appendChild(Ot),Ot);var Ot,Tt={CSS_BY_NAME:yt,add(t,e){return yt.has(t)||(yt.set(t,e),this.inject()),this},inject(){return xt().innerHTML=[...yt.values()].join("\n"),this},remove(t){return yt.has(t)&&(yt.delete(t),this.inject()),this}};const wt=Object.freeze({$(t){return ft(t,this.root)[0]},$$(t){return ft(t,this.root)}}),kt=Object.freeze({[i]:h,[s]:h,[o]:h}),Et=Object.freeze({shouldUpdate:h,onBeforeMount:h,onMounted:h,onBeforeUpdate:h,onUpdated:h,onBeforeUnmount:h,onUnmounted:h}),Nt=Object.assign({},kt,{clone:h,createDOM:h});function jt(t){return[i,s,o].reduce((e,n)=>(e[n]=t(n),e),{})}function At(e){let{css:n,template:r,exports:i,name:s}=e;const o=r?function(e,n){return e(ot,x,g,e=>n[e]||t.get(e))}(r,i?function(t){void 0===t&&(t={});return Object.entries(d(t)).reduce((t,e)=>{let[n,r]=e;return t[function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}(n)]=At(r),t},{})}(i.components):{}):Nt;return t=>{let{slots:e,attributes:u,props:c}=t;if(i&&i[a])return function(t,e){let{slots:n,attributes:r,props:i,css:s,template:o}=e;o&&dt("Pure components can not have html"),s&&dt("Pure components do not have css");const a=ct(t({slots:n,attributes:r,props:i}),kt);return jt(t=>(function(){return a[t](...arguments),a}))}(i,{slots:e,attributes:u,props:c,css:n,template:r});const l=d(i)||{},p=function(t){let{css:e,template:n,componentAPI:r,name:i}=t;e&&i&&Tt.add(i,e);return function t(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(i=[...r,...i]).length<e.length?t(e,...i):e(...i)}}(Bt)(ut(ct(r,Object.assign({},Et,{state:{}})),Object.assign({slots:null,root:null},wt,{name:i,css:e,template:n})))}({css:n,template:o,componentAPI:l,name:s})({slots:e,attributes:u,props:c});return{mount:(t,e,n)=>p.mount(t,n,e),update:(t,e)=>p.update(e,t),unmount:t=>p.unmount(t)}}}function Mt(t,e){return void 0===e&&(e=[]),Object.assign({},function(t){return Array.from(t.attributes).reduce((t,e)=>(t[ht(e.name)]=e.value,t),{})}(t),{},e.reduce((t,e)=>{const{value:n,type:r}=e;switch(!0){case!e.name&&r===lt:return Object.assign({},t,{},n);case r===pt:t.value=e.value;break;default:t[ht(e.name)]=e.value}return t},{}))}function Ct(t,e){return Object.assign({},t,{},d(e))}function St(t,e){(function(t){return vt(t,r)||t.tagName.toLowerCase()})(t)!==e&&bt(t,"is",e)}function Bt(t,r){let{slots:i,attributes:s,props:o}=r;const a=d(o);return h=function(t){return[...n].reduce((t,e)=>e(t)||t,t)}(ut(Object.create(t),{mount(n,r,o){return void 0===r&&(r={}),this[c]=function(t,e){void 0===e&&(e=[]);const n=e.map(e=>Y(t,e)),r={};return Object.assign(r,Object.assign({expressions:n},jt(t=>e=>(n.forEach(n=>n[t](e)),r))))}(n,s).mount(o),this.props=Object.freeze(Object.assign({},a,{},Mt(n,this[c].expressions))),this.state=Ct(this.state,r),this[l]=this.template.createDOM(n).clone(),n[e]=this,t.name&&St(n,t.name),at(this,"root",n),at(this,"slots",i),this.onBeforeMount(this.props,this.state),this[l].mount(n,this,o),this[u]=o,this.onMounted(this.props,this.state),this},update(t,e){void 0===t&&(t={}),e&&this[c].update(e);const n=Mt(this.root,this[c].expressions);if(!1!==this.shouldUpdate(n,this.props))return this.props=Object.freeze(Object.assign({},a,{},n)),this.state=Ct(this.state,t),this.onBeforeUpdate(this.props,this.state),this[l].update(this,this[u]),this.onUpdated(this.props,this.state),this},unmount(t){return this.onBeforeUnmount(this.props,this.state),this[c].unmount(),this[l].unmount(this,this[u],null===t?null:!t),this.onUnmounted(this.props,this.state),this}})),Object.keys(t).filter(e=>p(t[e])).forEach(t=>{h[t]=h[t].bind(h)}),h;var h}var It=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t,e){!function(e){var n=".nanobar{width:100%;height:4px;z-index:9999;top:0}.bar{width:0;height:100%;transition:height .3s;background:#000}";function r(t,e){t.classList?t.classList.add(e):t.className+=" "+e}t.exports=function(t){t=t||{};var e,i=document.createElement("div"),s={el:i,go:function(t){e(t),100===t&&a()}};function o(t){i.removeChild(t)}function a(){var t=function(t){var e=document.createElement("div"),n=0,i=0,s=0,o={el:e,go:c};function a(){var r=n-i;r<.1&&r>-.1?(u(i),s=0,100===n&&(e.style.height=0,setTimeout((function(){t(e)}),300))):(u(n-r/4),setTimeout(c,16))}function u(t){n=t,e.style.width=n+"%"}function c(t){t>=0?(i=t,s||(s=1,a())):s&&a()}return r(e,"bar"),o}(o);i.appendChild(t.el),e=t.go}return function(){var t=document.getElementById("nanobarcss");if(null===t){if((t=document.createElement("style")).type="text/css",t.id="nanobarcss",document.head.insertBefore(t,document.head.firstChild),!t.styleSheet)return t.appendChild(document.createTextNode(n));t.styleSheet.cssText=n}}(),r(i,"nanobar"),t.id&&(i.id=t.id),t.classname&&r(i,t.classname),t.target?(i.style.position="relative",t.target.insertBefore(i,t.target.firstChild)):(i.style.position="fixed",document.getElementsByTagName("body")[0].appendChild(i)),a(),s}}()}));const Ut=()=>{};var zt={css:'ptrack,[is="ptrack"]{ --figure-height: 20vh; --figure-background-size: 80%; --host-height: 50vh; } @media (min-width: 360px) { ptrack,[is="ptrack"]{ --figure-height: 60vh; --figure-background-size: 90%; --host-height: 100vh; } } @media (min-width: 720px) { ptrack,[is="ptrack"]{ --figure-width: 40%; --figure-background-size: 60%; --figure-height: 80vh; } ptrack figure,[is="ptrack"] figure{ float: left; width: var(--figure-width); } } @media (min-width: 1024px) { ptrack,[is="ptrack"]{ --figure-background-size: 20%; --figure-height: 40vh; padding-top: 20vh; --host-height: 100vh; } ptrack figure,[is="ptrack"] figure{ float: none; width: auto; } } ptrack article,[is="ptrack"] article{ display: block; height: var(--host-height); } ptrack figure,[is="ptrack"] figure{ display: flex; height: var(--figure-height); background-attachment: fixed; background-position: top; background-size: var(--figure-background-size); } ptrack article,[is="ptrack"] article{ } ptrack article h2,[is="ptrack"] article h2{ margin-top: 0; } ptrack article.hide,[is="ptrack"] article.hide{ display: none; }',exports:function(){return{state:{uri:null,hide:"hide"},onBeforeMount(t,e){e.uri=t.input.uri;const n=t.onStreamReady||Ut;this.root.addEventListener("stream_ready",n),SC.stream(e.uri).then(t=>{const n={uri:e.uri,player:t};this.root.dispatchEvent(new CustomEvent("stream_ready",{detail:n})),this.update({hide:""})}).catch(t=>{const n={uri:e.uri,err:t};this.root.dispatchEvent(new CustomEvent("stream_ready",{detail:n})),this.unmount()})}}},template:function(t,e,n,r){return t('<article expr3="expr3"><figure expr4="expr4"></figure><h2 expr5="expr5"> </h2><h3 expr6="expr6"> </h3><ul><li expr7="expr7"></li></ul></article>',[{redundantAttribute:"expr3",selector:"[expr3]",expressions:[{type:e.ATTRIBUTE,name:"class",evaluate:function(t){return`${t.state.hide}`}}]},{redundantAttribute:"expr4",selector:"[expr4]",expressions:[{type:e.ATTRIBUTE,name:"id",evaluate:function(t){return t.state.uri}},{type:e.ATTRIBUTE,name:"style",evaluate:function(t){return`background-image: url('${t.props.input.cover}')`}}]},{redundantAttribute:"expr5",selector:"[expr5]",expressions:[{type:e.TEXT,childNodeIndex:0,evaluate:function(t){return t.props.input.title}}]},{redundantAttribute:"expr6",selector:"[expr6]",expressions:[{type:e.TEXT,childNodeIndex:0,evaluate:function(t){return t.props.input.username}}]},{type:n.EACH,getKey:null,condition:null,template:t(" ",[{expressions:[{type:e.TEXT,childNodeIndex:0,evaluate:function(t){return t.tag}}]}]),redundantAttribute:"expr7",selector:"[expr7]",itemName:"tag",indexName:null,evaluate:function(t){return t.props.input.tags}}])},name:"ptrack"};var Lt=function(t){let e=Array.from(t);for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e};var Dt={css:'app,[is="app"]{ --section-width: 100%; overflow: hidden; height: 100vh; } @media (min-width: 360px) { app,[is="app"]{ --section-width: 100%; } } @media (min-width: 720px) { app,[is="app"]{ } } @media (min-width: 1024px) { app,[is="app"]{ --section-width: 80%; } app section,[is="app"] section{ margin: auto; } } app section,[is="app"] section{ width: var(--section-width); } app footer,[is="app"] footer{ position: fixed; bottom: 0; }',exports:{state:{progress:null,articles:[],streams:new Map,current:null,playlist:[],nextTimeout:null},components:{PTrack:zt},onBeforeMount(t,e){SC.initialize({client_id:t.client_id}),e.articles=t.tracks},onMounted(t,e){e.progress=new It},onUpdated(){console.log("updated")},onStreamReady(t){const{uri:e,player:n,err:r}=t.detail;r?this.state.articles.delete(e):(n.on("play-start",()=>{this.state.nextTimeout=setTimeout(()=>this.play(),3e4)}),n.on("time",t=>{const e=t-this.state.current.cue,n=Math.floor(100*e/3e4);this.state.progress.go(n)}),this.state.streams.set(e,n));const i=Math.floor(100*this.state.streams.size/this.state.articles.size);this.state.progress.go(i)},play(){this.pause(),0===this.state.playlist.length&&(this.state.playlist=Lt(Array.from(this.state.articles.keys())));const t=this.state.playlist.pop(),e=this.state.streams.get(t),n=Math.floor(Math.random()*(this.state.articles.get(t).duration-3e4));this.state.current={uri:t,stream:e,cue:n},window.location.hash=t,e.play(),e.seek(n)},pause(){this.state.current&&(this.state.current.stream.pause(),clearTimeout(this.state.nextTiemout),this.state.progress.go(100))}},template:function(t,e,n,r){return t('<section><ptrack expr0="expr0"></ptrack></section><footer><button expr1="expr1" name="play">Play\n      </button><button expr2="expr2" name="pause">Stop\n      </button></footer>',[{type:n.EACH,getKey:null,condition:null,template:t(null,[{type:n.TAG,getComponent:r,evaluate:function(t){return"ptrack"},slots:[],attributes:[{type:e.ATTRIBUTE,name:"input",evaluate:function(t){return t.input}},{type:e.EVENT,name:"onStreamReady",evaluate:function(t){return t.onStreamReady}}]}]),redundantAttribute:"expr0",selector:"[expr0]",itemName:"input",indexName:null,evaluate:function(t){return Array.from(t.state.articles.values())}},{redundantAttribute:"expr1",selector:"[expr1]",expressions:[{type:e.EVENT,name:"onclick",evaluate:function(t){return t.play}},{type:e.ATTRIBUTE,name:"disabled",evaluate:function(t){return t.state.disabled}}]},{redundantAttribute:"expr2",selector:"[expr2]",expressions:[{type:e.EVENT,name:"onclick",evaluate:function(t){return t.pause}}]}])},name:"app"};const Rt=($t=Dt,function(t,e,n){let{slots:r,attributes:i}=void 0===n?{}:n;return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((t,e)=>(function(){return t(e(...arguments))}))}(e=>e.mount(t),t=>t({props:e,slots:r,attributes:i}),At)($t)});var $t;const _t=new XMLHttpRequest;_t.addEventListener("load",(function(){const t=new Map(JSON.parse(this.responseText).filter(t=>-1===[520565400,555134337].indexOf(parseInt(t.id))).map(t=>[`tracks/${t.id}`,{uri:`tracks/${t.id}`,title:t.title,username:t.user.username,cover:t.artwork_url.replace("large","t500x500"),tags:[t.genre].concat(t.tag_list.split('"')).filter(t=>t&&t.trim().length>0),duration:t.duration}]));Rt(document.getElementById("root"),{client_id:"a9d29aaf9a0cc170e7ee6ab980a6ad49",tracks:t})})),_t.open("GET","data/2019-playlist.json"),_t.send()}();
